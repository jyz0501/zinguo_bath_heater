# Zinguo æµ´éœ¸ Home Assistant é›†æˆ
![Version](https://img.shields.io/badge/version-v1.0.0-blue)
![hacs_badge](https://img.shields.io/badge/HACS-Custom-orange.svg)
## é¡¹ç›®ç®€ä»‹

ä¸€ä¸ªå®Œæ•´çš„ Zinguo æ™ºèƒ½æµ´éœ¸ Home Assistant é›†æˆï¼Œé€šè¿‡ç”¨æˆ·å‹å¥½ç•Œé¢å’Œå®‰å…¨å‡­è¯å­˜å‚¨ï¼Œæä¾›å¯¹æµ´éœ¸çš„å…¨é¢æ§åˆ¶ã€‚

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### ğŸ›ï¸ å®Œæ•´è®¾å¤‡æ§åˆ¶

* â€‹**é£æ‰‡å®ä½“**â€‹ï¼šæ”¯æŒé¢„è®¾æ¨¡å¼ï¼ˆå…³é—­/å¹é£/æš–é£ä½æ¡£/æš–é£é«˜æ¡£ï¼‰
* â€‹**ç‹¬ç«‹å¼€å…³**â€‹ï¼šç¯å…‰/æ¢æ°”/å¹é£/æš–é£1/æš–é£2 ç‹¬ç«‹æ§åˆ¶
* â€‹**æ¸©åº¦ä¼ æ„Ÿå™¨**â€‹ï¼šå®æ—¶æ¸©åº¦ç›‘æµ‹ï¼ˆâ„ƒï¼‰
* â€‹**åœ¨çº¿çŠ¶æ€**â€‹ï¼šè®¾å¤‡è¿æ¥çŠ¶æ€å®æ—¶æ˜¾ç¤º
* â€‹**å®ä½“åˆ†ç»„**â€‹ï¼šè‡ªåŠ¨åˆ›å»ºè®¾å¤‡å®ä½“ç»„

### ğŸ”’ å®‰å…¨ä¸éšç§

* ä½¿ç”¨ Home Assistant åŠ å¯†å‡­è¯å­˜å‚¨
* æ‰€æœ‰æ•°æ®æœ¬åœ°å¤„ç†ï¼Œæ— äº‘ç«¯å­˜å‚¨
* ç›´æ¥ä¸ Zinguo å®˜æ–¹ API é€šä¿¡
* è‡ªåŠ¨ä»¤ç‰Œåˆ·æ–°ï¼Œæ— æ‰‹åŠ¨æ“ä½œ
* ä¸æ”¶é›†ä»»ä½•ç”¨æˆ·ä½¿ç”¨æ•°æ®

### ğŸš€ ç”¨æˆ·ä½“éªŒ

* å›¾å½¢åŒ–é…ç½®ï¼Œæ— éœ€ç¼–è¾‘ YAML
* æ™ºèƒ½é”™è¯¯å¤„ç†ï¼ˆè‡ªåŠ¨é‡è¯•/ç½‘ç»œæ¢å¤/é”™è¯¯æç¤ºï¼‰
* å¤šè¯­è¨€æ”¯æŒï¼ˆå«ä¸­æ–‡ç•Œé¢ï¼‰
* å“åº”å¼è®¾è®¡ï¼ˆé€‚é…æ¡Œé¢/å¹³æ¿/æ‰‹æœºï¼‰
* æ§åˆ¶æŒ‡ä»¤ç§’çº§å“åº”

### ğŸ”„ æ™ºèƒ½åŠŸèƒ½

* å®æ—¶çŠ¶æ€åŒæ­¥
* åœºæ™¯è®°å¿†ï¼ˆè®°ä½ç”¨æˆ·åå¥½ï¼‰
* è®¾å¤‡è”åŠ¨è§¦å‘
* å¯é…ç½®å®šæ—¶ä»»åŠ¡
* è¿œç¨‹æ§åˆ¶

### ğŸ›¡ï¸ ç¨³å®šæ€§ä¿è¯

* è‡ªåŠ¨ä¿æŒè®¾å¤‡è¿æ¥
* ç½‘ç»œå¼‚å¸¸æ—¶è‡ªåŠ¨é‡è¿
* é‡å¯åè‡ªåŠ¨æ¢å¤ä¸Šæ¬¡çŠ¶æ€
* å…¼å®¹å¤šç§ Home Assistant ç‰ˆæœ¬
* æ”¯æŒæ— ç¼æ›´æ–°

## ğŸ“¦ å®‰è£…æ–¹æ³•

### æ–¹æ³•ä¸€ï¼šHACS å®‰è£…ï¼ˆæ¨èï¼‰

1. ç¡®ä¿å·²å®‰è£… HACSï¼ˆæœªå®‰è£…è¯·å…ˆè®¿é—® HACS å®˜ç½‘æŒ‰æ•™ç¨‹å®‰è£…ï¼‰
2. æ‰“å¼€ Home Assistant ä¾§è¾¹æ  â†’ ç‚¹å‡» HACS
3. æ·»åŠ è‡ªå®šä¹‰ä»“åº“ï¼š
   
   * ç‚¹å‡»ã€Œé›†æˆã€â†’ å³ä¸Šè§’ â‹® èœå• â†’ é€‰æ‹©ã€Œè‡ªå®šä¹‰ä»“åº“ã€
   * ä»“åº“ï¼š`https://github.com/jyz0501/hassio-zinguo`
   * ç±»åˆ«ï¼šé›†æˆ
4. æœç´¢å¹¶å®‰è£…ï¼š
   
   * æœç´¢æ¡†è¾“å…¥ã€ŒZinguoã€â†’ é€‰æ‹©ã€ŒZinguo Bathroom Fanã€
   * ç‚¹å‡»ã€Œä¸‹è½½ã€â†’ é€‰æ‹©æœ€æ–°ç‰ˆæœ¬ â†’ ç‚¹å‡»ã€Œä¸‹è½½ã€
5. é‡å¯ Home Assistantï¼šè®¾ç½® â†’ ç³»ç»Ÿ â†’ é‡å¯
6. éªŒè¯ï¼šé‡å¯åæ£€æŸ¥æ˜¯å¦å‡ºç°ã€ŒZinguo Bathroom Fanã€é›†æˆ

### æ–¹æ³•äºŒï¼šHome Assistant æ’ä»¶æ–¹å¼

1. æ·»åŠ æ’ä»¶ä»“åº“ï¼šä»“åº“åœ°å€ `https://github.com/jyz0501/hassio-zinguo`
2. æ’ä»¶å•†åº—æœç´¢ã€ŒZinguo Bathroom Fanã€â†’ ç‚¹å‡»å®‰è£…
3. å¯åŠ¨æ’ä»¶å¹¶æŸ¥çœ‹æ—¥å¿—ç¡®ä¿æ­£å¸¸è¿è¡Œ
4. é‡å¯ Home Assistant

### æ–¹æ³•ä¸‰ï¼šæ‰‹åŠ¨å®‰è£…

1. ä¸‹è½½æ–‡ä»¶ï¼š
   
   ```bash
   # Git å…‹éš†
   git clone https://github.com/jyz0501/hassio-zinguo.git
   
   # æˆ–ä¸‹è½½ ZIP
   # è®¿é—® https://github.com/jyz0501/hassio-zinguo/releases ä¸‹è½½æœ€æ–°ç‰ˆ ZIP
   ```
2. è§£å‹æ–‡ä»¶ï¼ˆZIP éœ€å…ˆè§£å‹ï¼‰
3. å¤åˆ¶æ–‡ä»¶ï¼š
   
   * æ‰“å¼€ Home Assistant é…ç½®ç›®å½•
   * åˆ›å»º `custom_components`æ–‡ä»¶å¤¹ï¼ˆè‹¥ä¸å­˜åœ¨ï¼‰
   * å°† `zinguo`æ–‡ä»¶å¤¹å¤åˆ¶åˆ° `custom_components`
   * ç›®å½•ç»“æ„ç¤ºä¾‹ï¼š
     
     ```markdown
     config/
     â””â”€â”€ custom_components/
         â””â”€â”€ zinguo/
             â”œâ”€â”€ __init__.py
             â”œâ”€â”€ manifest.json
             â”œâ”€â”€ config_flow.py
             â”œâ”€â”€ const.py
             â”œâ”€â”€ switch.py
             â”œâ”€â”€ fan.py
             â”œâ”€â”€ sensor.py
             â””â”€â”€ coordinator.py
     ```
4. éªŒè¯ï¼šé‡å¯ Home Assistantï¼Œæ£€æŸ¥æ—¥å¿—æ— é”™è¯¯ï¼Œç¡®è®¤é›†æˆå‡ºç°åœ¨åˆ—è¡¨

## âš™ï¸ é…ç½®æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šæ·»åŠ é›†æˆ

1. è¿›å…¥ è®¾ç½® â†’ è®¾å¤‡ä¸æœåŠ¡ â†’ ç‚¹å‡»å³ä¸‹è§’ã€Œæ·»åŠ é›†æˆã€
2. æœç´¢æ¡†è¾“å…¥ã€ŒZinguoã€â†’ é€‰æ‹©ã€ŒZinguo Bathroom Fanã€
3. ç‚¹å‡»é›†æˆåç§°å¼€å§‹é…ç½®

### ç¬¬äºŒæ­¥ï¼šè¾“å…¥å‡­è¯ä¿¡æ¯

| å­—æ®µ     | è¯´æ˜                     | ç¤ºä¾‹           | å¿…å¡« |
| ---------- | -------------------------- | ---------------- | ------ |
| è´¦æˆ·     | æ³¨å†Œ Zinguo åº”ç”¨çš„æ‰‹æœºå· | 13800138000    | \*   |
| å¯†ç      | Zinguo è´¦æˆ·å¯†ç           | your\_password | \*   |
| MAC åœ°å€ | æµ´éœ¸è®¾å¤‡ MAC åœ°å€        | ABCDEF123456   | \*   |
| åç§°     | è‡ªå®šä¹‰è®¾å¤‡åç§°           | ä¸»å«æµ´éœ¸       | \*   |

â€‹**è·å– MAC åœ°å€**â€‹ï¼š

æ‰“å¼€ Zinguo å®˜æ–¹ App â†’ è®¾å¤‡è¯¦æƒ…é¡µ â†’ æŸ¥çœ‹è®¾å¤‡ä¿¡æ¯ä¸­çš„ MAC åœ°å€ï¼ˆ12ä½å¤§å†™å­—æ¯æ•°å­—ï¼Œæ— å†’å·/çŸ­æ¨ªçº¿ï¼‰

â€‹**æ³¨æ„äº‹é¡¹**â€‹ï¼š

* è´¦æˆ·å¯†ç ä¼šå®‰å…¨åŠ å¯†å­˜å‚¨ï¼Œä¸æ˜¾ç¤ºæ˜æ–‡
* MAC åœ°å€éœ€å®Œå…¨åŒ¹é…ï¼ˆå«å¤§å°å†™ï¼‰
* è®¾å¤‡åç§°å°†ä½œä¸ºæ‰€æœ‰å®ä½“å‰ç¼€

### ç¬¬ä¸‰æ­¥ï¼šå®Œæˆé…ç½®

1. å¡«å†™å®Œä¿¡æ¯åç‚¹å‡»ã€Œæäº¤ã€ï¼Œç³»ç»ŸéªŒè¯è´¦æˆ·å’Œè®¾å¤‡ä¿¡æ¯
2. éªŒè¯æˆåŠŸï¼šæ˜¾ç¤ºé…ç½®æˆåŠŸï¼Œè‡ªåŠ¨åˆ›å»ºæ‰€æœ‰å®ä½“
3. åç»­ä¿®æ”¹ï¼šç‚¹å‡»é›†æˆã€Œé€‰é¡¹ã€å¯ä¿®æ”¹è®¾å¤‡æ˜¾ç¤ºåç§°

## ğŸ  åˆ›å»ºçš„å®ä½“

### é£æ‰‡å®ä½“

* â€‹**å®ä½“ID**â€‹ï¼š`fan.[è®¾å¤‡åç§°]_fan`
* â€‹**åç§°**â€‹ï¼š`[è®¾å¤‡åç§°] Fan`
* â€‹**åŠŸèƒ½**â€‹ï¼šä¸»æ§åˆ¶é¢æ¿ï¼ˆå«é¢„è®¾æ¨¡å¼ï¼‰
* â€‹**çŠ¶æ€**â€‹ï¼šå¼€å…³çŠ¶æ€ã€é¢„è®¾æ¨¡å¼
* â€‹**å±æ€§**â€‹ï¼šæ¸©åº¦ã€åœ¨çº¿çŠ¶æ€ç­‰

### å¼€å…³å®ä½“

| åŠŸèƒ½  | å®ä½“ID                              | åç§°                   | å›¾æ ‡           | åŠŸèƒ½æè¿°              |
| ------- | ------------------------------------- | ------------------------ | ---------------- | ----------------------- |
| ç¯å…‰  | `switch.[è®¾å¤‡åç§°]_light`       | [è®¾å¤‡åç§°] Light       | mdi:lightbulb  | æ§åˆ¶æµ´éœ¸ç¯å…‰          |
| æ¢æ°”  | `switch.[è®¾å¤‡åç§°]_ventilation` | [è®¾å¤‡åç§°] Ventilation | mdi:air-filter | æ§åˆ¶æ¢æ°”åŠŸèƒ½          |
| å¹é£  | `switch.[è®¾å¤‡åç§°]_wind`        | [è®¾å¤‡åç§°] Wind        | mdi:fan        | æ§åˆ¶å¹é£åŠŸèƒ½          |
| æš–é£1 | `switch.[è®¾å¤‡åç§°]_heater_1`    | [è®¾å¤‡åç§°] Heater 1    | mdi:radiator   | æ§åˆ¶æš–é£1ï¼ˆä½æ¡£åŠ çƒ­ï¼‰ |
| æš–é£2 | `switch.[è®¾å¤‡åç§°]_heater_2`    | [è®¾å¤‡åç§°] Heater 2    | mdi:radiator   | æ§åˆ¶æš–é£2ï¼ˆé«˜æ¡£åŠ çƒ­ï¼‰ |

### ä¼ æ„Ÿå™¨å®ä½“

| åŠŸèƒ½       | å®ä½“ID                                | åç§°                     | å•ä½ | ç²¾åº¦   | è®¾å¤‡ç±»      | æ›´æ–°é¢‘ç‡ |
| ------------ | --------------------------------------- | -------------------------- | ------ | -------- | ------------- | ---------- |
| æ¸©åº¦ä¼ æ„Ÿå™¨ | `sensor.[è®¾å¤‡åç§°]_temperature`   | [è®¾å¤‡åç§°] Temperature   | Â°C  | 0.1Â°C | temperature | 5åˆ†é’Ÿ    |
| åœ¨çº¿çŠ¶æ€   | `sensor.[è®¾å¤‡åç§°]_online_status` | [è®¾å¤‡åç§°] Online Status | -    | -      | -           | å®æ—¶     |

â€‹**è®¾å¤‡æ³¨å†Œ**â€‹ï¼šæ‰€æœ‰å®ä½“è‡ªåŠ¨æ³¨å†Œåˆ°åŒä¸€è®¾å¤‡ä¸‹ï¼ˆåç§°=é…ç½®æ—¶è®¾ç½®çš„åç§°ï¼Œåˆ¶é€ å•†=Zinguoï¼Œå‹å·=Smart Bathroom Fanï¼Œè¿æ¥æ–¹å¼=äº‘ç«¯ï¼‰

## ğŸ® ä½¿ç”¨æ–¹æ³•

### é£æ‰‡æ§åˆ¶

â€‹**å¯ç”¨æ¨¡å¼**â€‹ï¼š`off`ï¼ˆå…³é—­ï¼‰ã€`cool`ï¼ˆå¹é£ï¼‰ã€`heat_low`ï¼ˆæš–é£ä½æ¡£ï¼‰ã€`heat_high`ï¼ˆæš–é£é«˜æ¡£ï¼‰

â€‹**æœåŠ¡è°ƒç”¨ç¤ºä¾‹**â€‹ï¼š

```yaml
# å¼€å¯å¹é£æ¨¡å¼
service: fan.set_preset_mode
target:
  entity_id: fan.bathroom_fan
data:
  preset_mode: "cool"

# å¼€å¯æš–é£ä½æ¡£
service: fan.set_preset_mode
target:
  entity_id: fan.bathroom_fan
data:
  preset_mode: "heat_low"

# å…³é—­é£æ‰‡
service: fan.turn_off
target:
  entity_id: fan.bathroom_fan
```

### ç‹¬ç«‹å¼€å…³æ§åˆ¶

â€‹**æœåŠ¡è°ƒç”¨ç¤ºä¾‹**â€‹ï¼š

```yaml
# æ‰“å¼€ç¯å…‰
service: switch.turn_on
target:
  entity_id: switch.bathroom_light

# æ‰“å¼€æ¢æ°”
service: switch.turn_on
target:
  entity_id: switch.bathroom_ventilation

# æ‰“å¼€æš–é£1
service: switch.turn_on
target:
  entity_id: switch.bathroom_heater_1
```

## ğŸ¤– è‡ªåŠ¨åŒ–ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šæ—©æ™¨æ´—æ¾¡é¢„çƒ­ï¼ˆå·¥ä½œæ—¥7ç‚¹è‡ªåŠ¨å¼€å¯æš–é£20åˆ†é’Ÿï¼‰

```yaml
automation:
  - alias: "å·¥ä½œæ—¥æ—©æ™¨é¢„çƒ­"
    description: "å·¥ä½œæ—¥7ç‚¹è‡ªåŠ¨å¼€å¯æš–é£"
    trigger:
      platform: time
      at: "07:00:00"
    condition:
      - condition: time
        weekday: [mon, tue, wed, thu, fri]
      - condition: state
        entity_id: sensor.bathroom_temperature
        below: 22
    action:
      - service: fan.set_preset_mode
        target: {entity_id: fan.bathroom_fan}
        data: {preset_mode: "heat_low"}
      - delay: "00:20:00"
      - service: fan.set_preset_mode
        target: {entity_id: fan.bathroom_fan}
        data: {preset_mode: "off"}
    mode: single
```

### ç¤ºä¾‹2ï¼šæ¹¿åº¦æ§åˆ¶ï¼ˆæ¹¿åº¦>75%è‡ªåŠ¨æ¢æ°”25åˆ†é’Ÿï¼‰

```yaml
automation:
  - alias: "æ™ºèƒ½æ¹¿åº¦æ§åˆ¶"
    description: "æ¹¿åº¦è¶…è¿‡75%è‡ªåŠ¨æ¢æ°”"
    trigger:
      - platform: numeric_state
        entity_id: sensor.bathroom_humidity
        above: 75
      - platform: state
        entity_id: binary_sensor.bathroom_motion
        to: "off"
        from: "on"
    condition:
      - condition: state
        entity_id: switch.bathroom_ventilation
        state: "off"
      - condition: template
        value_template: "{{ states('sensor.bathroom_humidity') | float > 75 }}"
    action:
      - service: switch.turn_on
        target: {entity_id: switch.bathroom_ventilation}
      - delay: "00:25:00"
      - service: switch.turn_off
        target: {entity_id: switch.bathroom_ventilation}
    mode: restart
```

### ç¤ºä¾‹3ï¼šå›å®¶è‡ªåŠ¨é¢„çƒ­ï¼ˆæ£€æµ‹åˆ°å›å®¶ä¸”å®¤æ¸©<20â„ƒæ—¶é¢„çƒ­15åˆ†é’Ÿï¼‰

```yaml
automation:
  - alias: "å›å®¶è‡ªåŠ¨é¢„çƒ­"
    description: "æ£€æµ‹åˆ°å³å°†å›å®¶æ—¶é¢„çƒ­å«ç”Ÿé—´"
    trigger:
      platform: zone
      entity_id: device_tracker.person_name
      zone: zone.home
      event: enter
    condition:
      - condition: sun
        after: sunset
        before: sunrise
      - condition: template
        value_template: "{{ states('sensor.bathroom_temperature') | float < 20 }}"
    action:
      - service: fan.set_preset_mode
        target: {entity_id: fan.bathroom_fan}
        data: {preset_mode: "heat_low"}
      - delay: "00:15:00"
      - service: fan.set_preset_mode
        target: {entity_id: fan.bathroom_fan}
        data: {preset_mode: "off"}
```

### ç¤ºä¾‹4ï¼šæ¸©åº¦ä¿æŠ¤ï¼ˆå®¤æ¸©>35â„ƒæ—¶è‡ªåŠ¨å…³é—­åŠ çƒ­å¹¶é€šçŸ¥ï¼‰

```yaml
automation:
  - alias: "æ¸©åº¦ä¿æŠ¤"
    description: "æ¸©åº¦è¿‡é«˜æ—¶è‡ªåŠ¨å…³é—­åŠ çƒ­"
    trigger:
      platform: numeric_state
      entity_id: sensor.bathroom_temperature
      above: 35
    condition:
      - condition: or
        conditions:
          - condition: state
            entity_id: switch.bathroom_heater_1
            state: "on"
          - condition: state
            entity_id: switch.bathroom_heater_2
            state: "on"
    action:
      - service: fan.set_preset_mode
        target: {entity_id: fan.bathroom_fan}
        data: {preset_mode: "off"}
      - service: notify.mobile_app_phone
        data:
          message: "æµ´éœ¸æ¸©åº¦è¿‡é«˜ï¼Œå·²è‡ªåŠ¨å…³é—­åŠ çƒ­åŠŸèƒ½"
          title: "å®‰å…¨æé†’"
    mode: single
```

## ğŸ“± Lovelace å¡ç‰‡é…ç½®

### ç®€æ´æ§åˆ¶é¢æ¿

```yaml
type: vertical-stack
cards:
  - type: entity
    entity: fan.bathroom_fan
    name: æµ´éœ¸æ§åˆ¶
    icon: mdi:fan
    tap_action: {action: more-info}
  - type: horizontal-stack
    cards:
      - type: button
        entity: switch.bathroom_light
        name: ç¯å…‰
        icon: mdi:lightbulb
        tap_action: {action: toggle}
      - type: button
        entity: switch.bathroom_ventilation
        name: æ¢æ°”
        icon: mdi:air-filter
        tap_action: {action: toggle}
  - type: entities
    entities:
      - entity: sensor.bathroom_temperature
        name: å½“å‰æ¸©åº¦
        icon: mdi:thermometer
      - entity: sensor.bathroom_online_status
        name: è®¾å¤‡çŠ¶æ€
        icon: mdi:wifi
```

### é«˜çº§æ§åˆ¶é¢æ¿ï¼ˆéœ€å®‰è£… Mushroom å¡ç‰‡ï¼‰

```yaml
type: custom:mushroom-title-card
title: å«ç”Ÿé—´æµ´éœ¸
subtitle: Zinguo æ™ºèƒ½æµ´éœ¸

type: custom:mushroom-chips-card
chips:
  - type: template
    icon: mdi:fan
    icon_color: |
      [[[
        if (states['fan.bathroom_fan'].state === 'off') return 'grey';
        else return 'blue';
      ]]]
    content: |
      [[[
        const state = states['fan.bathroom_fan'].state;
        if (state === 'off') return 'å…³é—­';
        if (state === 'cool') return 'å¹é£';
        if (state === 'heat_low') return 'æš–é£ä½æ¡£';
        if (state === 'heat_high') return 'æš–é£é«˜æ¡£';
        return state;
      ]]]
    tap_action: {action: more-info, entity: fan.bathroom_fan}

type: custom:mushroom-template-card
primary: æ¸©åº¦
secondary: "[[[ return states['sensor.bathroom_temperature'].state + 'Â°C'; ]]]"
icon: mdi:thermometer
icon_color: |
  [[[
    const temp = parseFloat(states['sensor.bathroom_temperature'].state);
    if (temp < 20) return 'blue';
    if (temp > 30) return 'red';
    return 'green';
  ]]]

type: custom:mushroom-entity-card
entity: sensor.bathroom_online_status
name: è¿æ¥çŠ¶æ€
icon: mdi:wifi
icon_color: |
  [[[
    if (states['sensor.bathroom_online_status'].state === 'Online') return 'green';
    else return 'red';
  ]]]
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

| é—®é¢˜                       | å¯èƒ½åŸå›                                 | è§£å†³æ–¹æ³•                                                                             |
| ---------------------------- | ----------------------------------------- | -------------------------------------------------------------------------------------- |
| é›†æˆæœªå‡ºç°åœ¨é›†æˆåˆ—è¡¨       | æœªé‡å¯ HA/æ–‡ä»¶ä½ç½®é”™è¯¯/æƒé™é—®é¢˜         | é‡å¯ HAï¼›æ£€æŸ¥ `custom_components/zinguo`å­˜åœ¨ï¼›`chmod -R 755`æ–‡ä»¶å¤¹ï¼›æŸ¥çœ‹æ—¥å¿— |
| é…ç½®æ—¶æç¤º"æ— æ³•è¿æ¥åˆ°è®¾å¤‡" | MAC é”™è¯¯/è´¦æˆ·å¯†ç é”™è¯¯/è®¾å¤‡ç¦»çº¿/ç½‘ç»œé—®é¢˜ | ç¡®è®¤ MACï¼ˆ12ä½å¤§å†™ï¼‰ï¼›ç”¨ App æµ‹è¯•è´¦æˆ·ï¼›æ£€æŸ¥è®¾å¤‡åœ¨çº¿ï¼›æ£€æŸ¥ç½‘ç»œ                        |
| å®ä½“çŠ¶æ€ä¸æ›´æ–°             | è®¾å¤‡ç¦»çº¿/API ä»¤ç‰Œè¿‡æœŸ/ç½‘ç»œä¸ç¨³å®š        | æ£€æŸ¥åœ¨çº¿çŠ¶æ€ä¼ æ„Ÿå™¨ï¼›åˆ é™¤é›†æˆåé‡åŠ ï¼›æ£€æŸ¥ç½‘ç»œ                                         |
| æ§åˆ¶æŒ‡ä»¤æ‰§è¡Œå¤±è´¥           | è®¾å¤‡æœªå“åº”/API é™åˆ¶/å¹¶å‘æ§åˆ¶            | ç­‰å¾…å‡ ç§’é‡è¯•ï¼›æ£€æŸ¥è®¾å¤‡æ˜¯å¦ç¹å¿™ï¼›é¿å…é¢‘ç¹å‘æŒ‡ä»¤                                       |

### é”™è¯¯ä»£ç 

| é”™è¯¯ä»£ç        | å«ä¹‰       | è§£å†³æ–¹æ³•         |
| ---------------- | ------------ | ------------------ |
| 401            | è®¤è¯å¤±è´¥   | é‡æ–°è¾“å…¥è´¦æˆ·å¯†ç  |
| 404            | è®¾å¤‡æœªæ‰¾åˆ° | æ£€æŸ¥ MAC åœ°å€    |
| 500            | æœåŠ¡å™¨é”™è¯¯ | ç­‰å¾…åé‡è¯•       |
| timeout        | è¿æ¥è¶…æ—¶   | æ£€æŸ¥ç½‘ç»œè¿æ¥     |
| invalid\_token | ä»¤ç‰Œæ— æ•ˆ   | é‡å¯é›†æˆ         |

### æ—¥å¿—è°ƒè¯•

1. å¯ç”¨è°ƒè¯•æ—¥å¿—ï¼šåœ¨ `configuration.yaml`æ·»åŠ 
   
   ```yaml
   logger:
     default: info
     logs:
       custom_components.zinguo: debug
   ```
2. æŸ¥çœ‹æ—¥å¿—ï¼šSSH æ‰§è¡Œ `tail -f config/home-assistant.log | grep zinguo`æˆ–é€šè¿‡ Web ç•Œé¢ï¼ˆè®¾ç½®â†’ç³»ç»Ÿâ†’æ—¥å¿—ï¼‰

## ğŸ”„ æ›´æ–°ä¸ç»´æŠ¤

### é€šè¿‡ HACS æ›´æ–°

1. æ‰“å¼€ HACS â†’ é›†æˆ
2. æ‰¾åˆ°ã€ŒZinguo Bathroom Fanã€ï¼Œæœ‰æ›´æ–°æ—¶æ˜¾ç¤ºã€Œæ›´æ–°ã€æŒ‰é’®
3. ç‚¹å‡»æ›´æ–°â†’é€‰æ‹©ç‰ˆæœ¬â†’ä¸‹è½½åé‡å¯ HA

### æ‰‹åŠ¨æ›´æ–°

1. å¤‡ä»½å½“å‰é…ç½®
2. ä¸‹è½½æœ€æ–°ç‰ˆæœ¬
3. æ›¿æ¢ `custom_components/zinguo`æ–‡ä»¶å¤¹
4. é‡å¯ HA

### å¤‡ä»½é…ç½®

```bash
tar -czf zinguo-backup-$(date +%Y%m%d).tar.gz \
  config/custom_components/zinguo \
  config/.storage/core.config_entries
```

## ğŸ“Š æŠ€æœ¯ç»†èŠ‚

### API æ¥å£

* â€‹**è®¤è¯**â€‹ï¼šPOST `https://iot.zinguo.com/api/v1/customer/login`ï¼ˆå‚æ•°ï¼š{"account":"æ‰‹æœºå·","password":"å¯†ç "}ï¼‰
* â€‹**è®¾å¤‡çŠ¶æ€æŸ¥è¯¢**â€‹ï¼šGET `https://iot.zinguo.com/api/v1/customer/devices`ï¼ˆå¤´éƒ¨ï¼šx-access-token: [ä»¤ç‰Œ]ï¼‰
* â€‹**è®¾å¤‡æ§åˆ¶**â€‹ï¼šPUT `https://iot.zinguo.com/api/v1/wifiyuba/yuBaControl`ï¼ˆå¤´éƒ¨ï¼šx-access-token: [ä»¤ç‰Œ]ï¼Œå‚æ•°ï¼šå« MAC å’Œæ§åˆ¶æŒ‡ä»¤çš„ JSONï¼‰

### å·¥ä½œåŸç†

1. è®¤è¯ï¼šç”¨è´¦æˆ·å¯†ç è·å–è®¿é—®ä»¤ç‰Œ
2. è®¾å¤‡å‘ç°ï¼šæŸ¥è¯¢è´¦æˆ·è®¾å¤‡ï¼ŒæŒ‰ MAC åŒ¹é…
3. çŠ¶æ€è½®è¯¢ï¼šæ¯5åˆ†é’ŸæŸ¥è¯¢ä¸€æ¬¡çŠ¶æ€
4. æ§åˆ¶æŒ‡ä»¤ï¼šå‘é€æŒ‡ä»¤åç«‹å³åˆ·æ–°çŠ¶æ€
5. é”™è¯¯å¤„ç†ï¼šä»¤ç‰Œè¿‡æœŸæ—¶è‡ªåŠ¨é‡æ–°è®¤è¯

### å®‰å…¨æœºåˆ¶

* å‡­è¯å®‰å…¨ï¼šå¯†ç ç”¨ HA åŠ å¯†å­˜å‚¨
* ä»¤ç‰Œç®¡ç†ï¼šä»¤ç‰Œå­˜å†…å­˜ï¼Œä¸æŒä¹…åŒ–
* é€šä¿¡åŠ å¯†ï¼šæ‰€æœ‰ API ç”¨ HTTPS
* æœ¬åœ°å¤„ç†ï¼šæ‰€æœ‰æ•°æ®æœ¬åœ°å¤„ç†
* æƒé™æ§åˆ¶ï¼šéµå¾ª HA æƒé™ç³»ç»Ÿ

## ğŸ¤ å‚ä¸è´¡çŒ®

### æŠ¥å‘Šé—®é¢˜

1. è®¿é—® GitHub Issues
2. ç‚¹å‡»ã€ŒNew Issueã€â†’ é€‰æ‹©é—®é¢˜ç±»å‹
3. æä¾›è¯¦ç»†ä¿¡æ¯ï¼šHA ç‰ˆæœ¬ã€é›†æˆç‰ˆæœ¬ã€é”™è¯¯æ—¥å¿—ã€å¤ç°æ­¥éª¤

### åŠŸèƒ½å»ºè®®

1. åˆ›å»º Feature Request Issue
2. æè¿°åŠŸèƒ½éœ€æ±‚å’Œä½¿ç”¨åœºæ™¯ï¼Œæä¾›å‚è€ƒå®ç°ï¼ˆå¦‚æœ‰ï¼‰

### ä»£ç è´¡çŒ®

1. Fork ä»“åº“ â†’ åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ â†’ æäº¤å˜æ›´ â†’ åˆ›å»º Pull Request
2. ä»£ç è§„èŒƒï¼šéµå¾ª Python PEP 8ï¼Œæ·»åŠ ç±»å‹æ³¨è§£ã€æ–‡æ¡£æ³¨é‡Šï¼ŒåŒ…å«æµ‹è¯•ç”¨ä¾‹

## ğŸ“„ è®¸å¯è¯

é‡‡ç”¨ MIT è®¸å¯è¯ï¼Œè¯¦è§ LICENSEæ–‡ä»¶ã€‚

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ Zinguoï¼ˆä¼˜è´¨æ™ºèƒ½æµ´éœ¸äº§å“ï¼‰ã€Home Assistant å›¢é˜Ÿï¼ˆä¼˜ç§€æ™ºèƒ½å®¶å±…å¹³å°ï¼‰ã€HACS å›¢é˜Ÿï¼ˆä¾¿æ·æ’ä»¶ç®¡ç†ï¼‰ã€æ‰€æœ‰è´¡çŒ®è€…å’Œæµ‹è¯•ç”¨æˆ·ã€‚

## ğŸ“ æ”¯æŒä¸å¸®åŠ©

* â€‹**GitHub Issues**â€‹ï¼šæŠ¥å‘Šé—®é¢˜å’ŒåŠŸèƒ½è¯·æ±‚
* â€‹**Home Assistant ç¤¾åŒº**â€‹ï¼šè®ºå›å¯»æ±‚å¸®åŠ©
* â€‹**Discussions**â€‹ï¼šå‚ä¸åŠŸèƒ½è®¨è®º
* â€‹**è”ç³»ç»´æŠ¤è€…**â€‹ï¼šGitHub @jyz0501ï¼ˆEmail é€šè¿‡ GitHub ä¸ªäººèµ„æ–™è·å–ï¼‰

## ğŸ”— ç›¸å…³é“¾æ¥

* Home Assistant å®˜ç½‘
* HACS å®˜ç½‘
* Zinguo å®˜ç½‘
* Home Assistant ä¸­æ–‡ç¤¾åŒº
* Home Assistant å®˜æ–¹è®ºå›

---

**â€‹æ„Ÿè°¢ä½¿ç”¨ï¼â€‹**â€‹ å¦‚æœé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·è€ƒè™‘ â­ ç»™é¡¹ç›® Starã€ğŸ“¢ åˆ†äº«ç»™æœ‹å‹ã€ğŸ› æŠ¥å‘Šé—®é¢˜æˆ– ğŸ’¡ æå‡ºå»ºè®®ã€‚ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼ğŸš¿âœ¨

